<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Ol3 draw</title>
	<link rel="stylesheet" type="text/css" href="../../../plugin/ol3/css/ol.css"/>
	<style type="text/css">
		body, #map {
			border: 0px;
			margin: 0px;
			padding: 0px;
			width: 100%;
			height: 100%;
			font-size: 13px;
		}
	</style>
	<script type="text/javascript" src="../../../plugin/ol3/build/ol.js"></script>
	<script type="text/javascript" src="../../../plugin/jquery/jquery-1.8.3.js"></script>
	<script type="text/javascript">
        var start = "POINT(111.00932312011719 35.05805969238281)";
        var end = "POINT(110.72885131835938 34.55958938598633)";
		var route = "MULTILINESTRING ((111.00126647949219 35.05047607421875, 111.00932312011719 35.05805969238281), (110.99183654785156 35.04105758666992, 111.00126647949219 35.05047607421875), (110.98660278320312 35.032569885253906, 110.99183654785156 35.04105758666992), (110.98164367675781 35.02385330200195, 110.98660278320312 35.032569885253906), (110.97805786132812 35.015830993652344, 110.98164367675781 35.02385330200195), (110.96810150146484 35.00274658203125, 110.97805786132812 35.015830993652344), (110.96122741699219 34.98921585083008, 110.96810150146484 35.00274658203125), (110.94983673095703 34.98252868652344, 110.96122741699219 34.98921585083008), (110.93788146972656 34.977901458740234, 110.94983673095703 34.98252868652344), (110.92758178710938 34.975563049316406, 110.93788146972656 34.977901458740234), (110.912841796875 34.96977615356445, 110.92758178710938 34.975563049316406), (110.90174102783203 34.96285629272461, 110.912841796875 34.96977615356445), (110.88645935058594 34.955692291259766, 110.90174102783203 34.96285629272461), (110.8636703491211 34.94733810424805, 110.88645935058594 34.955692291259766), (110.8575668334961 34.94387435913086, 110.8636703491211 34.94733810424805), (110.85370635986328 34.93882369995117, 110.8575668334961 34.94387435913086), (110.85154724121094 34.93011474609375, 110.85370635986328 34.93882369995117), (110.84223175048828 34.91015625, 110.85154724121094 34.93011474609375), (110.83614349365234 34.90509033203125, 110.84223175048828 34.91015625), (110.82755279541016 34.90047073364258, 110.83614349365234 34.90509033203125), (110.81755065917969 34.89720916748047, 110.82755279541016 34.90047073364258), (110.80809783935547 34.89487075805664, 110.81755065917969 34.89720916748047), (110.79638671875 34.89503479003906, 110.80809783935547 34.89487075805664), (110.78970336914062 34.89568328857422, 110.79638671875 34.89503479003906), (110.774658203125 34.89628219604492, 110.78970336914062 34.89568328857422), (110.76348876953125 34.89850616455078, 110.774658203125 34.89628219604492), (110.75401306152344 34.89982223510742, 110.76348876953125 34.89850616455078), (110.74537658691406 34.899314880371094, 110.75401306152344 34.89982223510742), (110.73314666748047 34.89649200439453, 110.74537658691406 34.899314880371094), (110.72451782226562 34.89552688598633, 110.73314666748047 34.89649200439453), (110.7120132446289 34.89292907714844, 110.72451782226562 34.89552688598633), (110.6961669921875 34.888938903808594, 110.7120132446289 34.89292907714844), (110.6850814819336 34.883148193359375, 110.6961669921875 34.888938903808594), (110.67230987548828 34.8796272277832, 110.6850814819336 34.883148193359375), (110.65953063964844 34.876338958740234, 110.67230987548828 34.8796272277832), (110.642578125 34.87302017211914, 110.65953063964844 34.876338958740234), (110.6314697265625 34.86996841430664, 110.642578125 34.87302017211914), (110.62145233154297 34.86921310424805, 110.6314697265625 34.86996841430664), (110.61002349853516 34.869815826416016, 110.62145233154297 34.86921310424805), (110.5958023071289 34.87154769897461, 110.61002349853516 34.869815826416016), (110.58157348632812 34.87373352050781, 110.5958023071289 34.87154769897461), (110.5718002319336 34.875946044921875, 110.58157348632812 34.87373352050781), (110.55731201171875 34.87652587890625, 110.5718002319336 34.875946044921875), (110.54393768310547 34.87688446044922, 110.55731201171875 34.87652587890625), (110.53307342529297 34.87702941894531, 110.54393768310547 34.87688446044922), (110.51917266845703 34.874629974365234, 110.53307342529297 34.87702941894531), (110.50640106201172 34.87155532836914, 110.51917266845703 34.874629974365234), (110.49890899658203 34.869205474853516, 110.50640106201172 34.87155532836914), (110.48474884033203 34.86566162109375, 110.49890899658203 34.869205474853516), (110.47360229492188 34.8667106628418, 110.48474884033203 34.86566162109375), (110.46156311035156 34.87233352661133, 110.47360229492188 34.8667106628418), (110.45596313476562 34.874576568603516, 110.46156311035156 34.87233352661133), (110.4481201171875 34.87702941894531, 110.45596313476562 34.874576568603516), (110.43753051757812 34.87785339355469, 110.4481201171875 34.87702941894531), (110.42587280273438 34.874549865722656, 110.43753051757812 34.87785339355469), (110.41118621826172 34.86870193481445, 110.42587280273438 34.874549865722656), (110.39763641357422 34.86194610595703, 110.41118621826172 34.86870193481445), (110.38379669189453 34.85541534423828, 110.39763641357422 34.86194610595703), (110.36949157714844 34.84315872192383, 110.38379669189453 34.85541534423828), (110.35291290283203 34.83476638793945, 110.36949157714844 34.84315872192383), (110.33793640136719 34.829593658447266, 110.35291290283203 34.83476638793945), (110.32795715332031 34.827213287353516, 110.33793640136719 34.829593658447266), (110.32022857666016 34.82278823852539, 110.32795715332031 34.827213287353516), (110.3115234375 34.80851745605469, 110.32022857666016 34.82278823852539), (110.30695343017578 34.797489166259766, 110.3115234375 34.80851745605469), (110.30378723144531 34.78510284423828, 110.30695343017578 34.797489166259766), (110.3010025024414 34.7672233581543, 110.30378723144531 34.78510284423828), (110.29955291748047 34.7523307800293, 110.3010025024414 34.7672233581543), (110.29547882080078 34.74519729614258, 110.29955291748047 34.7523307800293), (110.28972625732422 34.73965072631836, 110.29547882080078 34.74519729614258), (110.28294372558594 34.72836685180664, 110.28972625732422 34.73965072631836), (110.27507781982422 34.714561462402344, 110.28294372558594 34.72836685180664), (110.26825714111328 34.68702697753906, 110.27507781982422 34.714561462402344), (110.27584075927734 34.682525634765625, 110.26825714111328 34.68702697753906), (110.28510284423828 34.67689514160156, 110.27584075927734 34.682525634765625), (110.29071044921875 34.67259979248047, 110.28510284423828 34.67689514160156), (110.29779815673828 34.6628303527832, 110.29071044921875 34.67259979248047), (110.30011749267578 34.656211853027344, 110.29779815673828 34.6628303527832), (110.30439758300781 34.648929595947266, 110.30011749267578 34.656211853027344), (110.30728149414062 34.64140701293945, 110.30439758300781 34.648929595947266), (110.31207275390625 34.6373291015625, 110.30728149414062 34.64140701293945), (110.31463623046875 34.632320404052734, 110.31207275390625 34.6373291015625), (110.31580352783203 34.628211975097656, 110.31463623046875 34.632320404052734), (110.31255340576172 34.623374938964844, 110.31580352783203 34.628211975097656), (110.3070297241211 34.62034606933594, 110.31255340576172 34.623374938964844), (110.29740142822266 34.61452865600586, 110.3070297241211 34.62034606933594), (110.28753662109375 34.605506896972656, 110.29740142822266 34.61452865600586), (110.27237701416016 34.59757995605469, 110.28753662109375 34.605506896972656), (110.26397705078125 34.60253143310547, 110.27237701416016 34.59757995605469), (110.25702667236328 34.60337829589844, 110.26397705078125 34.60253143310547), (110.24698638916016 34.60647964477539, 110.25702667236328 34.60337829589844), (110.2222671508789 34.606685638427734, 110.24698638916016 34.60647964477539), (110.2164306640625 34.6075439453125, 110.2222671508789 34.606685638427734), (110.20783233642578 34.60699462890625, 110.2164306640625 34.6075439453125), (110.2006607055664 34.60371780395508, 110.20783233642578 34.60699462890625), (110.19657135009766 34.599098205566406, 110.2006607055664 34.60371780395508), (110.19275665283203 34.5942497253418, 110.19657135009766 34.599098205566406), (110.18594360351562 34.58662414550781, 110.19275665283203 34.5942497253418), (110.17794036865234 34.58356475830078, 110.18594360351562 34.58662414550781), (110.169921875 34.581878662109375, 110.17794036865234 34.58356475830078), (110.16192626953125 34.57858657836914, 110.169921875 34.581878662109375), (110.1592025756836 34.57535171508789, 110.16192626953125 34.57858657836914), (110.1562271118164 34.5700569152832, 110.1592025756836 34.57535171508789), (110.1562271118164 34.5700569152832, 110.17101287841797 34.56586837768555), (110.17101287841797 34.56586837768555, 110.18106079101562 34.562313079833984), (110.18106079101562 34.562313079833984, 110.18718719482422 34.56077194213867), (110.18718719482422 34.56077194213867, 110.19583892822266 34.55766296386719), (110.19583892822266 34.55766296386719, 110.2011489868164 34.555198669433594), (110.2011489868164 34.555198669433594, 110.20868682861328 34.55184555053711), (110.20868682861328 34.55184555053711, 110.21344757080078 34.54960632324219), (110.21344757080078 34.54960632324219, 110.22044372558594 34.546470642089844), (110.22044372558594 34.546470642089844, 110.23635864257812 34.539310455322266), (110.23635864257812 34.539310455322266, 110.24223327636719 34.53616714477539), (110.24223327636719 34.53616714477539, 110.2503433227539 34.53235626220703), (110.2503433227539 34.53235626220703, 110.25396728515625 34.530792236328125), (110.25396728515625 34.530792236328125, 110.25871276855469 34.528778076171875), (110.25871276855469 34.528778076171875, 110.26344299316406 34.527679443359375), (110.26344299316406 34.527679443359375, 110.26983642578125 34.5265998840332), (110.26983642578125 34.5265998840332, 110.27677154541016 34.526668548583984), (110.27677154541016 34.526668548583984, 110.28426361083984 34.527198791503906), (110.28426361083984 34.527198791503906, 110.29090881347656 34.527034759521484), (110.29090881347656 34.527034759521484, 110.29704284667969 34.5250358581543), (110.29704284667969 34.5250358581543, 110.3012466430664 34.521873474121094), (110.3012466430664 34.521873474121094, 110.30547332763672 34.517791748046875), (110.30547332763672 34.517791748046875, 110.30970764160156 34.5123405456543), (110.30970764160156 34.5123405456543, 110.31281280517578 34.50870895385742), (110.31281280517578 34.50870895385742, 110.31591796875 34.50484848022461), (110.31591796875 34.50484848022461, 110.31928253173828 34.50236129760742), (110.31928253173828 34.50236129760742, 110.32569122314453 34.5001335144043), (110.32569122314453 34.5001335144043, 110.33293151855469 34.4979133605957), (110.33293151855469 34.4979133605957, 110.34208679199219 34.49685287475586), (110.34208679199219 34.49685287475586, 110.34873962402344 34.49760055541992), (110.34873962402344 34.49760055541992, 110.36646270751953 34.499595642089844), (110.36646270751953 34.499595642089844, 110.37589263916016 34.49968338012695), (110.37589263916016 34.49968338012695, 110.38642120361328 34.49977493286133), (110.38642120361328 34.49977493286133, 110.39501190185547 34.500308990478516), (110.39501190185547 34.500308990478516, 110.40164184570312 34.50197219848633), (110.40164184570312 34.50197219848633, 110.40770721435547 34.505001068115234), (110.40770721435547 34.505001068115234, 110.41372680664062 34.51077651977539), (110.41372680664062 34.51077651977539, 110.41783142089844 34.515159606933594), (110.41783142089844 34.515159606933594, 110.42745208740234 34.52142333984375), (110.42745208740234 34.52142333984375, 110.43599700927734 34.52584457397461), (110.43599700927734 34.52584457397461, 110.44454956054688 34.529579162597656), (110.44454956054688 34.529579162597656, 110.44950866699219 34.53190994262695), (110.44950866699219 34.53190994262695, 110.45806121826172 34.53564453125), (110.45806121826172 34.53564453125, 110.46497344970703 34.53799057006836), (110.46497344970703 34.53799057006836, 110.46856689453125 34.53824996948242), (110.46856689453125 34.53824996948242, 110.47493743896484 34.53899002075195), (110.47493743896484 34.53899002075195, 110.4810562133789 34.538124084472656), (110.4810562133789 34.538124084472656, 110.48690032958984 34.53656768798828), (110.48690032958984 34.53656768798828, 110.49579620361328 34.534584045410156), (110.49579620361328 34.534584045410156, 110.50498962402344 34.53145217895508), (110.50498962402344 34.53145217895508, 110.51249694824219 34.529911041259766), (110.51249694824219 34.529911041259766, 110.52165985107422 34.52952194213867), (110.52165985107422 34.52952194213867, 110.52886962890625 34.529579162597656), (110.52886962890625 34.529579162597656, 110.5374526977539 34.53102111816406), (110.5374526977539 34.53102111816406, 110.54714965820312 34.53178024291992), (110.54714965820312 34.53178024291992, 110.55545043945312 34.53390121459961), (110.55545043945312 34.53390121459961, 110.55903625488281 34.53530502319336), (110.55903625488281 34.53530502319336, 110.56482696533203 34.53832244873047), (110.56482696533203 34.53832244873047, 110.5683822631836 34.543155670166016), (110.5683822631836 34.543155670166016, 110.56973266601562 34.54659652709961), (110.56973266601562 34.54659652709961, 110.57096862792969 34.55919647216797), (110.57096862792969 34.55919647216797, 110.5805435180664 34.57185745239258), (110.5805435180664 34.57185745239258, 110.58358001708984 34.57279586791992), (110.58358001708984 34.57279586791992, 110.58830261230469 34.572601318359375), (110.58830261230469 34.572601318359375, 110.59915161132812 34.570159912109375), (110.59915161132812 34.570159912109375, 110.6038818359375 34.56950759887695), (110.6038818359375 34.56950759887695, 110.6097412109375 34.56611633300781), (110.6097412109375 34.56611633300781, 110.6153335571289 34.56318283081055), (110.6153335571289 34.56318283081055, 110.6206283569336 34.560699462890625), (110.6206283569336 34.560699462890625, 110.6275863647461 34.558231353759766), (110.6275863647461 34.558231353759766, 110.63259887695312 34.55666732788086), (110.63259887695312 34.55666732788086, 110.63899993896484 34.55487823486328), (110.63899993896484 34.55487823486328, 110.64483642578125 34.553775787353516), (110.64483642578125 34.553775787353516, 110.6501235961914 34.55335235595703), (110.6501235961914 34.55335235595703, 110.65484619140625 34.55178451538086), (110.65484619140625 34.55178451538086, 110.658203125 34.54951858520508), (110.658203125 34.54951858520508, 110.66155242919922 34.54702377319336), (110.66155242919922 34.54702377319336, 110.66407775878906 34.54429244995117), (110.66407775878906 34.54429244995117, 110.66605377197266 34.54133224487305), (110.66605377197266 34.54133224487305, 110.66718292236328 34.53950500488281), (110.66718292236328 34.53950500488281, 110.66998291015625 34.536781311035156), (110.66998291015625 34.536781311035156, 110.6733169555664 34.5356559753418), (110.6733169555664 34.5356559753418, 110.67693328857422 34.535682678222656), (110.67693328857422 34.535682678222656, 110.67996215820312 34.537532806396484), (110.67996215820312 34.537532806396484, 110.6832275390625 34.54373550415039), (110.6832275390625 34.54373550415039, 110.68147277832031 34.55356216430664), (110.68147277832031 34.55356216430664, 110.68083953857422 34.5604248046875), (110.68083953857422 34.5604248046875, 110.68274688720703 34.563873291015625), (110.68274688720703 34.563873291015625, 110.6877212524414 34.56573486328125), (110.6877212524414 34.56573486328125, 110.69407653808594 34.56760787963867), (110.69407653808594 34.56760787963867, 110.7010269165039 34.56765365600586), (110.7010269165039 34.56765365600586, 110.71047973632812 34.565425872802734), (110.71047973632812 34.565425872802734, 110.71492767333984 34.564537048339844), (110.71492767333984 34.564537048339844, 110.72189331054688 34.56206130981445), (110.72189331054688 34.56206130981445, 110.72885131835938 34.55958938598633))";
		var wkts = [start, end, route];
		function init(){
            var untiled1 = new ol.layer.Image({
                source: new ol.source.ImageWMS({
                    ratio: 1,
                    url: 'http://localhost:6080/geoserver/zz_rail/wms',
                    params: {'FORMAT': 'image/png',
                        'VERSION': '1.1.1',
                        LAYERS: 'zz_rail:rail_segment1',
                        STYLES: ''
                    },
                    serverType: 'geoserver'
                })
            });
			var features = new Array();
            var style = new ol.style.Style({
                stroke: new ol.style.Stroke({
                    color: '#3ffff6',
                    width: 5,
                    lineJoin: 'round'
                }),
                image:new ol.style.Icon({
                    anchor: [0.5, 0.5],
                    size: [21, 25],
                    offset: [0, 0],
                    opacity: 1,
                    scale: 0.8,
                    src: 'data/icon.png'
                })
            });
			for(var i=0;i<wkts.length;i++){
				var wktformat = new ol.format.WKT();
				var feature = wktformat.readFeature(wkts[i]);
				features.push(feature);
			}

			var vector = new ol.layer.Vector({
				source: new ol.source.Vector({
					features: features
				}),
				style:style
			});
			var map = new ol.Map({
				controls: ol.control.defaults({
					attribution: false
				}),
				target: 'map',
				layers: [untiled1, vector],
				view: new ol.View({
					projection: new ol.proj.Projection({
						code: 'EPSG:4326',
						units: 'degrees'
					}),
					center: [113.43521161986385, 33.87923541800126],
        			zoom: 7
				})
			});
		}
	</script>
</head>
<body onLoad="init()">
<div id="map">
</div>
</body>
</html>