{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dd7109dcfa941d69f53b","webpack:///./src/index.js","webpack:///./src/MapScaleControl.js","webpack:///./src/util.js","webpack:///./src/control.scss","webpack:///external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"openlayers\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"openlayers\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MapScale\"] = factory(require(\"openlayers\"));\n\telse\n\t\troot[\"ol\"] = root[\"ol\"] || {}, root[\"ol\"][\"control\"] = root[\"ol\"][\"control\"] || {}, root[\"ol\"][\"control\"][\"MapScale\"] = factory(root[\"ol\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dd7109dcfa941d69f53b","/**\n * OpenLayers 3 map scale control.\n * A map scale control with scale string.\n *\n * @author Vladimir Vershinin <ghettovoice@gmail.com>\n * @licence MIT https://opensource.org/licenses/MIT\n *          Based on OpenLayers 3. Copyright 2005-2015 OpenLayers Contributors. All rights reserved. http://openlayers.org\n * @copyright (c) 2016, Vladimir Vershinin\n */\nimport Control from './MapScaleControl';\nimport './control.scss';\n\nexport default Control;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","//@flow\nimport ol from \"openlayers\";\nimport { createElement, calculateDPI, formatNumber } from './util';\n\n/**\n * @typedef {Object} MapScaleControlOptions\n * @property {Element | string | undefined} target Specify a target if you want the control to be rendered outside of the map's viewport.\n * @property {string | string[] | undefined} className Custom class name of the control container element. Default is `ol-mapscale`.\n * @property {string | string[] | undefined} scaleLineClassName Custom class name of the scale line container element. Default is `ol-scale-line`.\n * @property {string | string[] | undefined} scaleValueClassName Custom class name of the scale value container element. Default is `ol-scale-value`.\n * @property {boolean | undefined} scaleLine Show/hide scale line control. Default is true.\n * @property {string[] | undefined} units Array of scale value units. Default is `['k', 'M', 'G']`.\n * @property {number | undefined} digits The number of digits to appear after the decimal point. Default is 0.\n */\nvar MapScaleControlOptions;\n\nconst DOTS_PER_INCH = 96;\nconst INCHES_PER_METER = 39.37;\n\n/**\n * MapScale control class.\n *\n * @class\n * @extends {ol.control.Control}\n * @author Vladimir Vershinin\n */\nexport default class MapScaleControl extends ol.control.Control {\n    /**\n     * @param {MapScaleControlOptions} options\n     */\n    constructor(options = {}) {\n        const className = options.className || 'ol-mapscale';\n        const scaleLineClassName = options.scaleLineClassName || \"ol-scale-line\";\n        const scaleValueClassName = options.scaleLineClassName || \"ol-scale-value\";\n        const render = MapScaleControl.render;\n        const target = options.target;\n\n        const element = createElement('div', className);\n\n        super({\n            element,\n            render,\n            target\n        });\n        /**\n         * @type {string[]}\n         * @private\n         */\n        this.units_ = options.units;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.digits_ = options.digits;\n        /**\n         * @type {Element}\n         * @private\n         */\n        this.scaleValueElement_ = createElement('div', scaleValueClassName);\n        element.appendChild(this.scaleValueElement_);\n\n        /**\n         * @private\n         * @type {olx.ViewState}\n         */\n        this.viewState_ = undefined;\n\n        /**\n         * @type {ol.control.ScaleLine}\n         * @protected\n         */\n        this.scaleLine_ = undefined;\n        if (options.scaleLine === undefined || options.scaleLine) {\n            const scaleLineElement = createElement('div', 'ol-scale-line-target');\n            element.appendChild(scaleLineElement);\n\n            this.scaleLine_ = new ol.control.ScaleLine({\n                target: scaleLineElement,\n                className: scaleLineClassName\n            });\n\n            this.scaleLine_.on(\"change:units\", ::this.handleUnitsChanged_);\n        }\n    }\n\n    /**\n     * @param {ol.MapEvent} mapEvent\n     * @this {MapScaleControl}\n     */\n    static render(mapEvent) {\n        const frameState = mapEvent.frameState;\n\n        if (frameState == null) {\n            this.viewState_ = null;\n        } else {\n            this.viewState_ = frameState.viewState;\n        }\n\n        this.updateElement_();\n    }\n\n    /**\n     * @param {ol.Map} map\n     */\n    setMap(map) {\n        this.scaleLine_ && this.scaleLine_.setMap(map);\n        super.setMap(map);\n    }\n\n    /**\n     * @private\n     */\n    handleUnitsChanged_() {\n        this.updateElement_();\n    }\n\n    /**\n     * @private\n     */\n    updateElement_() {\n        const viewState = this.viewState_;\n\n        if (viewState) {\n            const resolution = viewState.resolution;\n            const projection = viewState.projection;\n            const pointResolution = projection.getMetersPerUnit() * resolution;\n            const scale = Math.round(pointResolution * DOTS_PER_INCH * INCHES_PER_METER);\n\n            this.scaleValueElement_.innerHTML = \"1 : \" + formatNumber(scale, this.digits_, this.units_);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapScaleControl.js","/**\n * @param {string} tagName\n * @param {string|string[]} [classes]\n * @returns {Element}\n */\nexport function createElement(tagName, classes) {\n    const elem = document.createElement(tagName);\n\n    if (classes) {\n        elem.classList.add.apply(elem.classList, typeof classes === 'string' ? classes.split(' ') : classes);\n    }\n\n    return elem;\n}\n\n/**\n * Calculates screen DPI based on css style.\n *\n * @returns {number|undefined}\n */\nexport function calculateDPI() {\n    if (!document) {\n        return;\n    }\n\n    const inch = document.createElement(\"div\");\n\n    inch.style.width = \"1in\";\n    inch.style.height = \"1in\";\n    inch.style.position = \"fixed\";\n    inch.style.left = \"-100%\";\n\n    document.body.appendChild(inch);\n\n    var dpi = inch.offsetWidth;\n    document.body.removeChild(inch);\n\n    return dpi;\n}\n\n/**\n * Formats number.\n *\n * @param {number} num\n * @param {number} digits\n * @param {string[]} units\n * @returns {string}\n */\nexport function formatNumber(num, digits = 0, units = ['k', 'M', 'G']) {\n    for (var i = units.length - 1; i >= 0; i--) {\n        const decimal = Math.pow(1000, i + 1);\n\n        if (num <= -decimal || num >= decimal) {\n            return parseFloat(num / decimal).toFixed(digits) + units[i];\n        }\n    }\n\n    return num;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/control.scss\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}